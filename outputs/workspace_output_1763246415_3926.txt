    
    const answered = allQuestions.filter(q => answers[q.id] !== undefined).length;
    const total = allQuestions.length;
    
    return {
      answered,
      total,
      percentage: total > 0 ? Math.round((answered / total) * 100) : 0
    };
  },

  calculateComplianceScore(framework, questions, answers) {
    if (!framework.mappedQuestions || framework.mappedQuestions.length === 0) {
      return 0;
    }
    
    let total = 0;
    let count = 0;
    
    framework.mappedQuestions.forEach(qId => {
      if (answers[qId] !== undefined) {
        total += (answers[qId] / 5) * 100;
        count++;
      }
    });
    
    return count > 0 ? (total / count) : 0;
  },

  getMaturityLevel(score) {
    if (score >= 4.5) return 'Optimized';
